

/* =============== 1) ROOT VARIABLES ====================== */
:root{
  --ink:#0f1224; --muted:#6b6e83; --line:#ebeef7; --card:#ffffff;
  --bg:#fbfbff; --bg-2:#f5f7ff;
  --brand:#7c3aed; --brand-2:#22c55e; --brand-3:#f59e0b; --brand-4:#06b6d4;
  --danger:#ef4444; --warn:#f59e0b; --ok:#22c55e;
  --tabbar-h:12px; --safe-b:env(safe-area-inset-bottom,0px);
  --easy:#22c55e; --easy-bg:#e8f9ef;
  --medium:#f59e0b; --medium-bg:#fff5e6;
  --hard:#ef4444; --hard-bg:#ffebeb;
  --solve-bg-1:var(--brand); --solve-bg-2:#8b5cf6; --solve-ink:#fff;
}

/* =============== 2) BASE / RESET ======================== */
*{box-sizing:border-box}
html,body{height:100%;overflow-x:hidden}
body{
  margin:0;
  background:
    radial-gradient(1200px 800px at 120% -10%, #ffe7f0 0, transparent 55%),
    radial-gradient(1000px 700px at -10% -10%, #eaf7ff 0, transparent 58%),
    linear-gradient(180deg,var(--bg) 0,var(--bg-2) 100%);
  color:var(--ink);
  font-family:"Nunito",system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Helvetica Neue",Arial,"Apple Color Emoji";
  display:flex;flex-direction:column;min-height:100svh;
  padding-bottom:calc(var(--tabbar-h) + var(--safe-b));
}
:focus-visible{outline:3px solid #c7d2fe;outline-offset:3px;border-radius:12px}
a{color:inherit;text-decoration:none}
a:hover{text-decoration:none}
.link,.link-strong{color:var(--brand)}
.link:hover,.link-strong:hover{text-decoration:underline}

/* App Header */
.appbar{position:sticky;top:0;z-index:50;background:#fff;border-bottom:1px solid var(--line)}
.appbar .wrap{height:64px;display:flex;align-items:center;justify-content:space-between;gap:.75rem;padding:.5rem 1rem}
@import url("https://fonts.googleapis.com/css2?family=Rubik+Rounded:wght@700;800&display=swap");

.brand{
  display:flex;align-items:center;gap:.6rem;
  font-family:"Rubik Rounded","Nunito",system-ui;
  font-weight:800;font-size:1.35rem;color:var(--ink);
  letter-spacing:.2px;
  text-decoration: none;
  transition: opacity 0.2s;
}
.brand:hover{
  opacity: 0.8;
}

.brand-mark{
  width:40px;height:40px;border-radius:14px;display:grid;place-items:center;
  background:conic-gradient(from 200deg at 50% 50%,#f7ecff,#e9f7ff,#fff6e6,#f7ecff);
  border:1px solid #e6e9ff;
  box-shadow:
    0 0 0 3px #fff,           
    0 8px 18px rgba(15,18,36,.10);
  font-size:1.35rem;font-weight:900;
  color:transparent;
  background-clip:padding-box;
  -webkit-text-fill-color:transparent;
  background-image:
    linear-gradient(135deg,var(--brand-2),var(--brand-4),var(--brand));
  -webkit-background-clip:text;
  position:relative;
  transform:rotate(-2deg);
  transition:transform .18s ease, box-shadow .18s ease;
}

.brand-mark::after{
  content:"";
  position:absolute;inset:0;pointer-events:none;
  background:
    radial-gradient(6px 6px at 22% 28%, rgba(255,255,255,.9) 0 45%, transparent 50%),
    radial-gradient(5px 5px at 72% 62%, rgba(255,255,255,.85) 0 45%, transparent 50%),
    radial-gradient(4px 4px at 40% 78%, rgba(255,255,255,.8) 0 45%, transparent 50%);
  mix-blend-mode:screen;
}

.brand-mark:hover{
  transform:translateY(-1px) scale(1.04) rotate(0deg);
  box-shadow:
    0 0 0 3px #fff,
    0 12px 26px rgba(15,18,36,.14);
}

@keyframes wobble {
  0%,100%{ transform:rotate(-2deg) }
  50%{ transform:rotate(1.2deg) }
}
.brand-mark{ animation:wobble 4.2s ease-in-out infinite }





/* =============== 3) BUTTONS ============================= */
.btn,
.btn-ghost,
.btn-brand,
.btn-solve{
  appearance:none; cursor:pointer; display:inline-flex; align-items:center; gap:.35rem;
  border-radius:14px; font-weight:800;
  transition:all .12s ease;
}
.btn{ border:1px solid var(--line); background:#fff; color:var(--ink); padding:.55rem .9rem }
.btn:hover{ background:#f7f8ff }
.btn:active{ transform:translateY(1px) }
.btn[data-active="true"]{ background:#eef2ff; border-color:#c7d2fe; color:var(--brand) }

.btn-ghost{ border:1px solid var(--line); background:#fff; color:var(--ink); padding:.55rem .9rem }
.btn-ghost:hover{ background:#f7f8ff }
.btn-ghost.sm{ padding:.35rem .7rem; border-radius:12px; font-size:.9rem }

.btn-brand{
  border:none; color:#fff; font-weight:900; padding:.7rem 1rem;
  background:linear-gradient(180deg,#8b5cf6,var(--brand));
  border-radius:16px; box-shadow:0 8px 20px rgba(124,58,237,.28);
}
.btn-brand:hover{ filter:brightness(.98); transform:translateY(-1px) }

.btn-solve{
  border:0; gap:.45rem; padding:.7rem 1rem; font-weight:900; border-radius:16px;
  background:linear-gradient(180deg,var(--solve-bg-2),var(--solve-bg-1)); color:var(--solve-ink);
  box-shadow:0 10px 22px rgba(124,58,237,.25),0 2px 6px rgba(0,0,0,.06);
}
.btn-solve i{ font-size:1.15rem }
.btn-solve:hover{ transform:translateY(-1px); box-shadow:0 14px 28px rgba(124,58,237,.32),0 4px 10px rgba(0,0,0,.08) }
.btn-solve:active{ transform:translateY(0); filter:brightness(.98) }
.btn-wide{ width:100%; justify-content:center }

/* =============== 4) GLOBAL LAYOUT ======================= */
main{flex:1 0 auto;padding:1rem;max-width:1200px;margin:0 auto;width:100%;
  padding-bottom:calc(var(--tabbar-h) + var(--safe-b) + 16px)}
@media (min-width:992px){main{padding-bottom:48px}}
.page-head{display:flex;align-items:center;justify-content:space-between;gap:1rem;margin:.5rem 0 1rem}
.kicker{letter-spacing:.12em;text-transform:uppercase;color:var(--brand);font-weight:900}
.title{font-family:"Nunito";font-weight:900;line-height:1;margin:.1rem 0;font-size:clamp(1.6rem,2.2vw + 1rem,2.2rem)}
.panel{background:#fff;border:1px solid var(--line);border-radius:18px;box-shadow:0 10px 26px rgba(2,6,23,.05); margin-bottom:12px}
.panel .head{display:flex;align-items:center;justify-content:space-between;gap:.8rem;padding:14px 16px;border-bottom:1px solid var(--line)}
.panel .title{font-weight:900;font-size:1rem}

/* Toolbars / Filters */
.toolbar{display:flex;flex-wrap:wrap;align-items:center;gap:.6rem;padding:1rem}
.diff-group{display:flex;gap:.4rem;background:#f3f4ff;border:1px solid #e5e7ff;padding:.35rem;border-radius:999px}
.diff-btn{border:0;background:transparent;padding:.45rem .8rem;border-radius:999px;font-weight:900;cursor:pointer}
.diff-btn[data-active="true"]{background:#fff;box-shadow:0 1px 4px rgba(124,58,237,.18);color:var(--brand)}
.chips{display:flex;flex-wrap:wrap;gap:.4rem;margin-left:auto}
.chip{display:inline-flex;align-items:center;gap:.35rem;padding:.35rem .6rem;border-radius:999px;background:#fff;border:1px solid var(--line);font-weight:700;cursor:pointer}
.chip i{font-size:1rem}
.chip[data-active="true"]{outline:2px solid #c7d2fe;background:#eef2ff}
.search{min-width:260px}
.search input{width:100%;padding:.7rem .9rem;border:1px solid var(--line);border-radius:14px;font-weight:700}

/* Grid / Cards */
.grid{display:grid;grid-template-columns:1fr;gap:12px;margin-top:12px}
@media (min-width:680px){.grid{grid-template-columns:1fr 1fr}}
.card-q{position:relative;overflow:hidden;display:flex;gap:.9rem;align-items:stretch;border:1px solid var(--line);border-radius:18px;background:var(--card);padding:1rem}
.card-q:before{content:"";position:absolute;inset:auto -10% -30% auto;width:180px;height:180px;background:radial-gradient(closest-side,rgba(139,92,246,.18),transparent 65%);transform:rotate(12deg);pointer-events:none}
.card-q .badge{font-weight:900;border-radius:999px;padding:.25rem .55rem;font-size:.75rem}
.card-q .title{font-weight:900;font-size:1.05rem;margin:0}
.card-q .body{color:var(--muted);font-weight:600}

.grid{
  display:grid;
  gap:12px;
  grid-template-columns: repeat(auto-fill, minmax(320px,1fr));
  align-items:stretch;                
}
.card-q{ height:100%; display:flex; }  

.card-q .content{
  display:flex;
  flex-direction:column;
  gap:.4rem;
  flex:1 1 auto;                     
  min-width:0;                         
}

.card-q .q-actions{
  display:flex;
  align-items:flex-end;
  margin-left:1rem;
}
@media (min-width: 769px){
  .card-q .title{
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .card-q .body{
    display: -webkit-box;
    -webkit-line-clamp: 3; /* show 3 lines on desktop */
    line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    overflow-wrap: anywhere;
  }
}

@media (max-width: 768px){
  .grid{
    grid-template-columns:1fr!important;
    gap:10px;
    padding-inline:0;
  }
  .card-q{
    flex-direction:column;
    align-items:stretch;
    padding:.85rem .9rem;
    gap:.7rem;
    border-left-width:4px;
    background:var(--card)!important;
  }
  .card-q .title{
    white-space:normal;
    line-height:1.2;
    margin:0;
  }
  .card-q .badge{
    font-size:.7rem;
    padding:.2rem .45rem;
    margin-left:.4rem;
  }
  .card-q .body{
    display:-webkit-box;
    -webkit-line-clamp:4;
    line-clamp:4;
    -webkit-box-orient:vertical;
    overflow:hidden;
    margin:.1rem 0 .25rem;
  }
  .card-q .q-tags{
    overflow:visible;
    white-space:normal;
    gap:.35rem .4rem;
  }
  .card-q .q-actions{
    margin:0;
  }
  .card-q .btn-solve{
    width:100%;
    justify-content:center;
    padding:.6rem 0.9rem;
    border-radius:14px;
  }
  .card-q>.content,
  .card-q>.q-content{
    display:flex!important;
    flex-direction:column;
    gap:.4rem;
    min-width:0;
    flex:1 1 auto;
  }
}

.card-q .q-tags{
  overflow:hidden;
  white-space:nowrap;
  text-overflow:ellipsis;
}

.card-q .badge{ flex:0 0 auto }
.card-q .btn-solve{ white-space:nowrap }

.q-tags{display:flex;flex-wrap:wrap;gap:.4rem;margin-top:.35rem}
.q-actions{margin-left:auto;display:flex;align-items:center;position:relative;z-index:1}
@media (prefers-reduced-motion:no-preference){.card-q{transition:transform .15s ease,box-shadow .15s ease}.card-q:hover{transform:translateY(-2px);box-shadow:0 12px 28px rgba(2,6,23,.06)}}

/* Difficulty tints */
.diff-easy{border-left:8px solid var(--easy);background:linear-gradient(90deg,var(--easy-bg),transparent 60%)}
.diff-medium{border-left:8px solid var(--medium);background:linear-gradient(90deg,var(--medium-bg),transparent 60%)}
.diff-hard{border-left:8px solid var(--hard);background:linear-gradient(90deg,var(--hard-bg),transparent 60%)}
.badge-easy{background:var(--easy-bg);color:var(--easy);border:1px solid #b8f3cc}
.badge-medium{background:var(--medium-bg);color:var(--medium);border:1px solid #ffe0a6}
.badge-hard{background:var(--hard-bg);color:var(--hard);border:1px solid #ffc2c2}

/* Empty */
.empty{background:#fff;border:2px dashed #e5e7f5;border-radius:18px;padding:2rem;text-align:center;color:var(--muted);font-weight:800}

/* FABs */
.fab,
.fab-secondary {
  position: fixed;
  right: 16px;
  bottom: calc(var(--tabbar-h) + 18px + var(--safe-b));
  z-index: 60;
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.9rem 1rem;
  border: none;
  border-radius: 999px;
  color: #fff;
  font-weight: 900;
  font-size: 0.95rem;  
  line-height: 1;       
  text-decoration: none;
  width: 100px;
  transition: transform 0.15s ease;
}

.fab {
  background: linear-gradient(180deg, #f97316, var(--brand-3));
  box-shadow: 0 12px 30px rgba(249, 115, 22, 0.28);
}

.fab-secondary {
  bottom: calc(var(--tabbar-h) + 18px + var(--safe-b) + 64px);
  background: linear-gradient(180deg, #0ea5e9, #0ea5e9);
  box-shadow: 0 12px 30px rgba(14, 165, 233, 0.25);
}

@media (max-width: 768px) {
  .fab {
    bottom: calc(var(--tabbar-h) + 70px + var(--safe-b));
    right: 5px;
  }

  .fab-secondary {
    display: none;
  }
}


.fab:hover,
.fab-secondary:hover {
  transform: translateY(-1px);
}



.fab i,
.fab-secondary i {
  font-size: 1.1em;
}

.fab .fab-label,
.fab-secondary .fab-label {
  font-size: inherit;
}


/* Bottom Tabbar */
.tabbar{
  position:fixed;left:0;right:0;bottom:0;z-index:55;background:#fff;border-top:1px solid var(--line);
  min-height:var(--tabbar-h);display:flex;gap:.5rem;padding:.35rem .65rem calc(.35rem + var(--safe-b));
}
.tab{flex:1;text-align:center;text-decoration:none;color:#3a3d4f;font-weight:900}
.tab i{display:block;font-size:1.35rem}
.tab .label{font-size:.78rem;margin-top:.15rem;display:block}
.tab.active{color:var(--brand)}
@media (min-width:992px){.tabbar{display:none !important}}

/* =============== 6) LOGIN =============================== */
body.login-page{padding-bottom:0}
body.login-page main.login-wrap{padding:24px 16px 0}
body.login-page .login-wrap{min-height:100vh}
@media (max-width:991.98px){
  body.login-page .login-wrap{min-height:calc(100dvh - 64px - var(--tabbar-h) - var(--safe-b))}
}
body.login-page .login-card{margin:0}
body.login-page .login-card{margin-bottom:calc(var(--tabbar-h) + 32px + var(--safe-b))}
@media (min-width:992px){body.login-page .login-card{margin-bottom:64px}}

.login-wrap{flex:1 0 auto;display:grid;grid-template-columns:1fr;align-items:center;justify-items:center;position:relative;overflow:hidden}
.login-hero{position:absolute;inset:0;pointer-events:none}
.login-hero .bubble{position:absolute;border-radius:999px;filter:blur(2px);opacity:.55}
.login-hero .b1{width:280px;height:280px;right:-60px;top:-40px;background:radial-gradient(circle at 30% 30%,#ffe3ff,transparent 65%)}
.login-hero .b2{width:360px;height:360px;left:-80px;top:-60px;background:radial-gradient(circle at 60% 40%,#e3f7ff,transparent 65%)}
.login-hero .b3{width:320px;height:320px;left:50%;bottom:-140px;transform:translateX(-50%);background:radial-gradient(circle at 50% 50%,#fff1e1,transparent 65%)}
.mascot{position:absolute;top:90px;left:50%;transform:translateX(-50%);display:none}
@media (min-width:992px){.mascot{display:block}}
.logo-blob{
  width:84px;height:84px;border-radius:24px;display:grid;place-items:center;color:#fff;
  background:conic-gradient(from 180deg at 50% 50%,var(--brand),var(--brand-4),var(--brand-2),var(--brand));
  box-shadow:0 10px 26px rgba(124,58,237,.25);font-size:1.6rem;
}

.login-card{
  width:min(520px,92vw);padding:28px;border-radius:22px;background:#fff;
  border:1px solid var(--line);box-shadow:0 14px 36px rgba(2,6,23,.06);position:relative;z-index:1;
}
@media (min-width:576px){.login-card{padding:36px}}
.login-head{text-align:center;margin-bottom:18px}
.login-head .title{font-size:clamp(1.4rem,1.2rem + 1.2vw,1.9rem)}
.login-head .subtitle{margin:.25rem 0 0;color:var(--muted);font-weight:800}
.login-form{display:grid;gap:14px}
.field{display:grid;gap:8px}
.label{font-weight:900;color:var(--ink)}
.input{
  font:inherit;font-weight:800;padding:.85rem 1rem;border:1px solid var(--line);
  border-radius:16px;background:#fff;outline:none;transition:border-color .12s ease,box-shadow .12s ease;
}
.input:focus{border-color:#c7d2fe;box-shadow:0 0 0 4px rgba(199,210,254,.45)}
.input.is-invalid{border-color:#fecaca;box-shadow:0 0 0 3px rgba(254,202,202,.55)}
.error{display:none;color:#b91c1c;font-weight:800;font-size:.9rem}
.pw-group{display:grid;grid-template-columns:1fr auto;align-items:center;gap:8px}
.pw-toggle{appearance:none;border:1px solid var(--line);background:#fff;color:var(--ink);border-radius:14px;padding:.6rem .75rem;font-weight:900}
.pw-toggle:hover{background:#f7f8ff}
.input.is-invalid ~ .error{display:block}
.row-aux{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-top:2px}
.check{display:inline-flex;align-items:center;gap:.5rem;font-weight:800;color:var(--ink)}
.check input{width:18px;height:18px}
.signup{text-align:center;margin:14px 0 0;font-weight:800;color:var(--muted)}
.spinner{width:1rem;height:1rem;border-radius:999px;display:inline-block;margin-right:.5rem;border:2.5px solid rgba(255,255,255,.55);border-top-color:#fff;animation:spin .75s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.nav-inline{
  display: flex;
  align-items: center;
  gap: 0.5rem;
  z-index: 999999;
}
/* Align .nav-inline links with rest of site */
.nav-inline a.btn{ text-decoration:none;color:var(--ink);border:1px solid transparent }
.nav-inline a.btn:hover{ background:#f7f8ff }
/* Active navigation item styling */
.nav-inline a.btn.active{
  background:#eef2ff;
  border-color:#c7d2fe;
  color:var(--brand);
  font-weight:900;
}
.nav-inline a.btn.active:hover{ 
  background:#e0e7ff;
  border-color:#a5b4fc;
}
.nav-inline button.btn{ text-decoration:none;color:var(--ink);border:1px solid transparent }
.nav-inline button.btn:hover{ background:#f7f8ff }
.blocklyToolbox{
  z-index: 1;
}
@media(max-width:992px){
    .nav-inline{
      display: none;
    }
}
/* Landing page responsive styles */
@media(max-width: 768px){
  .features-grid-responsive{
    grid-template-columns: 1fr !important;
  }
  .steps-responsive{
    grid-template-columns: 1fr !important;
  }
}
@media(min-width: 769px) and (max-width: 1024px){
  .features-grid-responsive{
    grid-template-columns: repeat(3, 1fr) !important;
  }
  .steps-responsive{
    grid-template-columns: repeat(2, 1fr) !important;
  }
}
/* =============== 7) PROFILE ============================= */
main.profile{
  padding:1rem;max-width:1200px;margin:0 auto;width:100%;
  padding-bottom:calc(var(--tabbar-h) + var(--safe-b) + 16px);
}
@media (min-width:992px){ main.profile{ padding-bottom:48px } }
main.profile .muted{ color:var(--muted); font-weight:800 }

.hero{ position:relative; margin:12px 0 18px }
.hero-wrap{ position:relative; overflow:hidden; border:1px solid var(--line); border-radius:22px; background:#fff; box-shadow:0 14px 36px rgba(2,6,23,.06) }
.hero-bg{ position:absolute; inset:0; pointer-events:none }
.hero-bg:before{
  content:""; position:absolute; inset:-10% -10% auto -10%; height:180px;
  background:
    radial-gradient(800px 220px at 20% -40%, rgba(124,58,237,.12), transparent 60%),
    radial-gradient(680px 200px at 90% -30%, rgba(34,197,94,.10), transparent 60%),
    linear-gradient(180deg,#fff,#fcfcff)
}
.hero-row{ position:relative; display:grid; grid-template-columns:auto 1fr auto; gap:1rem; align-items:center; padding:16px }
@media (min-width:800px){ .hero-row{ padding:22px } }
.avatar-xl{ width:84px; height:84px; border-radius:22px; display:grid; place-items:center; font-weight:900; color:#fff; letter-spacing:.5px; font-size:1.6rem;
  background:conic-gradient(from 180deg at 50% 50%,var(--brand),var(--brand-4),var(--brand-2),var(--brand)); box-shadow:0 10px 26px rgba(124,58,237,.25) }
.identity .kicker{ letter-spacing:.12em; text-transform:uppercase; color:var(--brand); font-weight:900; font-size:.78rem }
.identity .name{ font-family:"Nunito", system-ui; font-weight:900; line-height:1; margin:.2rem 0; font-size:clamp(1.5rem,2.2vw + 1rem,2.2rem) }
.name{font-weight:900; margin-bottom: 8px;}
.identity .role{ display:inline-flex; align-items:center; gap:.35rem; padding:.2rem .55rem; border-radius:999px; background:#f6f7ff; border:1px solid #e8eaff; font-weight:900; font-size:.75rem; color:#3a3d4f }
.hero-cta{ display:inline-flex; align-items:center; gap:.5rem; border:none; color:#fff; font-weight:900; border-radius:16px; padding:.9rem 1.2rem; background:linear-gradient(180deg,#8b5cf6,var(--brand)); box-shadow:0 10px 22px rgba(124,58,237,.25) }
.hero-cta .bi{ font-size:1.1rem }

/* Stats strip */
.stats{ display:grid; gap:14px; margin:16px 0; grid-template-columns:1fr }
@media (min-width:700px){ .stats{ grid-template-columns:repeat(4,1fr) } }
.stat{ background:#fff; border:1px solid var(--line); border-radius:18px; padding:1.1rem 1rem; box-shadow:0 8px 20px rgba(2,6,23,.04); display:flex; flex-direction:column; gap:.4rem }
.stat .k{ color:var(--muted); font-weight:800; font-size:.9rem; display:flex; align-items:center; gap:.35rem }
.stat .v{ font-family:"Nunito", system-ui; font-weight:900; font-size:clamp(1.6rem, 1.2rem + 1vw, 2rem); line-height:1.1 }
.progress{ height:10px; background:#f3f4ff; border-radius:999px; margin-top:.3rem; overflow:hidden }
.progress-bar{ height:100%; border-radius:999px; background:linear-gradient(180deg,var(--brand-4),var(--brand)); transition:width .25s ease }

/* Timeline */
.timeline{ padding:12px 16px 16px }
.t-item{ display:flex; align-items:center; justify-content:space-between; gap:.75rem; padding:.6rem .75rem; border:1px solid var(--line); border-radius:14px; background:#fff }
.t-left{ display:flex; align-items:center; gap:.6rem }
.badge{ display:inline-flex; align-items:center; gap:.35rem; padding:.2rem .55rem; border-radius:999px; font-weight:900; font-size:.72rem; border:1px solid transparent }
.badge-easy{ background:var(--easy-bg); color:var(--easy); border-color:#b8f3cc }
.badge-medium{ background:var(--medium-bg); color:var(--medium); border-color:#ffe0a6 }
.badge-hard{ background:var(--hard-bg); color:var(--hard); border-color:#ffc2c2 }

.ach{ padding:12px 16px 16px; display:grid; gap:10px; grid-template-columns:1fr }
@media (min-width:620px){ .ach{ grid-template-columns:1fr 1fr } }
@media (min-width:900px){ .ach{ grid-template-columns:1fr 1fr 1fr } }
.ach-tile{
  display:flex; align-items:center; gap:.7rem; border:1px solid var(--line);
  border-radius:14px; background:#fff; padding:.7rem .85rem
}
.ach-tile i{ font-size:1.15rem }
.ach-tile .sub{ color:var(--muted); font-weight:800; font-size:.9rem }
.ach-tile.locked{ opacity:.55 }

/* =============== 8) BLOCKS INVENTORY ==================== */
.tools{ display:flex; flex-wrap:wrap; align-items:center; gap:.6rem; padding:12px 16px }
.btn-group .btn-ghost{ border-radius:999px }
.btn-ghost[data-active="true"]{ background:#eef2ff; border-color:#c7d2fe; color:var(--brand) }
.legend{ display:flex; flex-wrap:wrap; gap:.35rem; margin-left:auto }
.pill{ display:inline-flex; align-items:center; gap:.35rem; padding:.25rem .55rem; border-radius:999px; border:1px solid var(--line); background:#fff; font-weight:800 }
.pill.logic{ background:rgba(0,188,212,.12); border-color:rgba(0,188,212,.35); color:#046a74 }
.pill.loops{ background:rgba(251,140,0,.12); border-color:rgba(251,140,0,.35); color:#7a4a03 }
.pill.math{  background:rgba(67,160,71,.12); border-color:rgba(67,160,71,.35); color:#24572a }
.pill.text{  background:rgba(142,36,170,.12); border-color:rgba(142,36,170,.35); color:#5a1a69 }
.pill.lists{ background:rgba(3,155,229,.12); border-color:rgba(3,155,229,.35); color:#0d4e78 }
.pill.vars{  background:rgba(251,192,45,.16); border-color:rgba(251,192,45,.45); color:#7a5d00 }
.pill.func{  background:rgba(255,112,67,.14); border-color:rgba(255,112,67,.42); color:#7a2f1f }

.grid{ display:grid; gap:12px; padding:0 16px 16px; grid-template-columns:1fr }
@media (min-width:680px){ .grid{ grid-template-columns:1fr 1fr } }

/* Category tokens */
.cat-logic { --cat:#00bcd4; }
.cat-loops { --cat:#fb8c00; }
.cat-math  { --cat:#43a047; }
.cat-text  { --cat:#8e24aa; }
.cat-lists { --cat:#039be5; }
.cat-vars  { --cat:#fbc02d; }
.cat-func  { --cat:#ff7043; }

.block-card{
  position:relative; display:flex; align-items:center; justify-content:space-between; gap:.75rem;
  padding:.9rem 1rem; border:1px solid var(--line); border-radius:16px; background:#fff;
  box-shadow:0 6px 16px rgba(2,6,23,.04); transition:transform .15s ease, box-shadow .15s ease
}
.block-card:hover{ transform:translateY(-2px); box-shadow:0 14px 28px rgba(2,6,23,.08) }
.block-card .left{ display:flex; align-items:center; gap:.75rem }
.block-card i{ font-size:1.35rem; color:var(--brand) }
.cat-badge{ display:inline-flex; align-items:center; gap:.3rem; padding:.15rem .5rem; border-radius:999px; background:#f6f7ff; border:1px solid #e8eaff; font-weight:800; font-size:.8rem; color:#3a3d4f }

/* Missing vs Collected */
.state-missing{ font-weight:900;font-size:.82rem;color:#6b7280;margin-left:.35rem }
.cat-logic  .block-card.missing,
.cat-loops  .block-card.missing,
.cat-math   .block-card.missing,
.cat-text   .block-card.missing,
.cat-lists  .block-card.missing,
.cat-vars   .block-card.missing,
.cat-func   .block-card.missing,
.block-card.missing{
  background:linear-gradient(135deg,#f4f6fb,#eceff4) !important;
/*  border-left:6px solid #cbd5e1 !important;*/
  color:#6b7280;
  box-shadow:0 0 0 1px #e5e7f5 inset;
  filter:none;
}

.block-card.missing i{ color:#9aa0b2 }
.block-card.missing .name{ color:#6b7280 }
.state-missing{ color:#6b7280 }

.block-card.collected{ background:linear-gradient(0deg,#fff,#fff),linear-gradient(90deg,rgba(34,197,94,.12),transparent 68%); border-left:6px solid var(--ok) }

/* Category-tinted cards */
.cat-logic  .block-card{ background:linear-gradient(135deg,#e0f7fa,#b2ebf2); border-left:6px solid #00bcd4 }
.cat-loops  .block-card{ background:linear-gradient(135deg,#fff3e0,#ffe0b2); border-left:6px solid #fb8c00 }
.cat-math   .block-card{ background:linear-gradient(135deg,#e8f5e9,#c8e6c9); border-left:6px solid #43a047 }
.cat-text   .block-card{ background:linear-gradient(135deg,#f3e5f5,#e1bee7); border-left:6px solid #8e24aa }
.cat-lists  .block-card{ background:linear-gradient(135deg,#e1f5fe,#b3e5fc); border-left:6px solid #039be5 }
.cat-vars   .block-card{ background:linear-gradient(135deg,#fff8e1,#ffecb3); border-left:6px solid #fbc02d }
.cat-func   .block-card{ background:linear-gradient(135deg,#fbe9e7,#ffccbc); border-left:6px solid #ff7043 }

/* =============== 9) STUDIO (Blockly) ==================== */
body.studio{ display:flex; flex-direction:column; min-height:100svh }

/* Hero (studio) */
.studio .hero-studio{ position:relative; margin:12px 0 12px; border:1px solid var(--line); border-radius:22px; background:#fff; overflow:hidden; box-shadow:0 14px 36px rgba(2,6,23,.06) }
.studio .hero-studio .bg{ position:absolute; inset:0; pointer-events:none }
.studio .hero-studio .bg:before{
  content:""; position:absolute; inset:-10% -10% auto -10%; height:180px;
  background:
    radial-gradient(800px 220px at 20% -40%, rgba(124,58,237,.12), transparent 60%),
    radial-gradient(680px 200px at 90% -30%, rgba(34,197,94,.10), transparent 60%),
    linear-gradient(180deg,#fff,#fcfcff)
}
.studio .hero-studio .row{ position:relative; display:grid; grid-template-columns:auto 1fr auto; gap:1rem; align-items:center; padding:16px }
@media (min-width:800px){ .studio .hero-studio .row{ padding:22px } }
.studio .hero-studio .avatar{ width:84px;height:84px;border-radius:22px;display:grid;place-items:center;color:#fff;font-weight:900;font-size:1.6rem;
  background:conic-gradient(from 180deg,var(--brand),var(--brand-4),var(--brand-2),var(--brand)); box-shadow:0 10px 26px rgba(124,58,237,.25) }
.studio .hero-studio .kicker{ letter-spacing:.12em; text-transform:uppercase; color:var(--brand); font-weight:900; font-size:.8rem }
.studio .hero-studio .title{ font-family:"Nunito"; font-weight:900; line-height:1; margin:.2rem 0; font-size:clamp(1.5rem,2.2vw + 1rem,2.2rem) }
.studio .hero-studio .sub{ color:var(--muted); font-weight:800 }
.studio .hero-studio .cta{ display:inline-flex; align-items:center; gap:.6rem }
.studio .hero-studio .cta i{ font-size:1.1rem }

/* Sticky action bar */
.studio .actionbar{ position:sticky; top:64px; z-index:45; margin:0 0 12px; background:rgba(255,255,255,.92); backdrop-filter:blur(10px);
  border:1px solid var(--line); border-radius:16px; box-shadow:0 8px 22px rgba(2,6,23,.06) }
.studio .actions{ display:flex; flex-wrap:wrap; gap:.5rem; justify-content:flex-end; padding:.6rem }

/* Workspace / Panels */
.studio #blocklyArea{
  height:62vh; position:relative; overflow:hidden;
  background:linear-gradient(180deg,#fafaff 0%,#f5f7ff 100%), radial-gradient(140px 140px at 8% 14%, #efe9ff 0, transparent 60%);
  border:2px dashed #e5e7f5; border-radius:14px;
}
@media (max-width:991px){ .studio #blocklyArea{ height:56vh } }
.studio #blocklyDiv{ position:absolute; inset:0 }
.studio .console{
  border-radius:14px;border:1px solid #1b1f44;background:#0f1224;color:#dbe3ff;
  font-family:ui-monospace, Menlo, Consolas, "Liberation Mono", monospace; font-size:.92rem; padding:.8rem 1rem;
  max-height:280px; overflow:auto;
}
.studio .code{
  border-radius:14px;border:1px solid #e2e6ff;background:#fafaff;color:#1e293b;
  font-family:ui-monospace, Menlo, Consolas, "Liberation Mono", monospace; font-size:.92rem; padding:.8rem 1rem;
  max-height:280px; overflow:auto; white-space:pre-wrap;
}

/* Block categories UI */
.blocklyTreeRow{ border-radius:10px }
.blocklyTreeLabel{ font-weight:800 }
.blocklyTreeRow:hover{ background:#eef2ff }

/* Studio grid: workspace | outputs */
.studio .studio-grid{ display:grid; gap:12px; grid-template-columns:1fr }
@media (min-width:992px){ .studio .studio-grid{ grid-template-columns:7fr 5fr } }

/* Right panel: console over code */
.studio .panel--right pre{ max-height:320px; overflow:auto }
.studio .panel--right .title{ font-family:"Nunito"; font-weight:900 }

/* =============== 10) PROGRAMMING QUESTION PANEL ========= */
.panel--q{
  background:#fff; border:1px solid var(--line); border-radius:22px;
  box-shadow:0 10px 30px rgba(2,6,23,.06); padding:1.5rem 1.8rem; display:flex; flex-direction:column; gap:1rem;
}
.q-header{ display:flex; align-items:center; justify-content:space-between; flex-wrap:wrap; gap:1.5rem }
.q-left{ flex:1 1 520px }
.panel--q .kicker{ color:var(--brand); font-weight:900; text-transform:uppercase; letter-spacing:.1em }
.question-text{ font-family:"Nunito", system-ui; font-weight:800; color:var(--ink); line-height:1.6; font-size:1.1rem; margin:0 }
.q-actions{ display:flex; flex-wrap:wrap; gap:.6rem; justify-content:flex-end; align-items:center; min-width:280px }
.q-actions .btn-ghost{ border:1px solid var(--line); background:#fff; border-radius:12px; padding:.55rem .9rem; font-weight:800; color:var(--ink) }
.q-actions .btn-ghost:hover{ background:#f6f7ff; transform:translateY(-1px) }
.q-actions .btn-solve{
  background:linear-gradient(180deg,#8b5cf6,var(--brand)); color:#fff; font-weight:900;
  border:none; border-radius:14px; padding:.65rem 1.2rem; box-shadow:0 10px 22px rgba(124,58,237,.25);
}
.q-actions .btn-solve:hover{ transform:translateY(-1px); box-shadow:0 12px 28px rgba(124,58,237,.35) }

/* =============== 11) RESPONSIVE & PREFERS =============== */
@media (max-width:575.98px){
  .avatar-xl{ width:64px; height:64px; border-radius:18px; font-size:1.3rem }
  .block-card{ padding:.8rem .9rem }
}
@media (prefers-reduced-motion:reduce){
  .block-card, .hero-cta, .btn, .btn-ghost, .btn-brand, .btn-solve { transition:none }
  .block-card:hover{ transform:none }
}




/* =============== 12) Admin =============== */


  .page-head{display:flex;align-items:center;justify-content:space-between;gap:1rem;margin:.5rem 0 1rem}
    .tabs{display:flex;gap:.4rem;background:#f3f4ff;border:1px solid #e5e7ff;padding:.35rem;border-radius:999px}
    .tab-btn{border:0;background:transparent;padding:.55rem .9rem;border-radius:999px;font-weight:900;cursor:pointer}
    .tab-btn[data-active="true"]{background:#fff;box-shadow:0 1px 4px rgba(124,58,237,.18);color:var(--brand)}
    .hidden{display:none !important}
    .panel .section{padding:1rem}
    .filters{display:grid;gap:.6rem}
    @media(min-width:900px){
      .filters{grid-template-columns:2fr 1.2fr 2fr auto;align-items:end}
    }
    .label{font-weight:900;color:var(--ink);margin-bottom:.25rem}
    .input,.select,textarea{font:inherit;font-weight:800;padding:.75rem .9rem;border:1px solid var(--line);border-radius:14px;background:#fff}
    .select{appearance:none}
    .muted{color:var(--muted);font-weight:800}

    /* Simple table that inherits your theme */
    .data{width:100%;border-collapse:separate;border-spacing:0}
    .data thead th{
      text-align:left;font-weight:900;color:#3a3d4f;padding:.65rem .75rem;border-bottom:1px solid var(--line);background:#fbfbff;position:sticky;top:0;z-index:1
    }
    .data tbody td{padding:.7rem .75rem;border-bottom:1px solid var(--line);vertical-align:middle}
    .data tr:hover{background:#fafaff}

    /* Badges for status */
    .badge-status{font-weight:900;border-radius:999px;padding:.25rem .55rem;font-size:.75rem;border:1px solid transparent}
    .badge-pending{background:#fff5e6;color:var(--medium);border-color:#ffe0a6}
    .badge-graded{background:#e8f9ef;color:var(--ok);border-color:#b8f3cc}

.review-modal{border:1px solid var(--line);border-radius:16px;overflow:hidden;box-shadow:0 24px 60px rgba(2,6,23,.25)}
.review-modal .modal-header{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--line);padding:14px 16px}
.review-modal .modal-body{padding:16px;max-height:70vh;overflow:auto}
.code-box{border:1px solid #e2e6ff;background:#fafaff;color:#1e293b;border-radius:14px;font:500 .92rem ui-monospace,Menlo,Consolas,"Liberation Mono",monospace;padding:1rem;line-height:1.45;white-space:pre;overflow:auto}
.modal-backdrop.show{background:rgba(15,18,36,.95);backdrop-filter:saturate(120%) blur(6px)}

/* QR Scanner Modal - Force opaque background */
.qr-scanner-modal-dialog {
  opacity: 1 !important;
  margin: auto !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

.qr-scanner-modal-content {
  background-color: #ffffff !important;
  opacity: 1 !important;
  background: #ffffff !important;
  mix-blend-mode: normal !important;
}

.qr-scanner-modal-header {
  background-color: #ffffff !important;
  opacity: 1 !important;
  background: #ffffff !important;
  mix-blend-mode: normal !important;
}

.qr-scanner-modal-body {
  background-color: #ffffff !important;
  opacity: 1 !important;
  background: #ffffff !important;
  mix-blend-mode: normal !important;
}

.qr-scanner-modal-footer {
  background-color: #ffffff !important;
  opacity: 1 !important;
  background: #ffffff !important;
  mix-blend-mode: normal !important;
}

.qr-scanner-modal-content * {
  opacity: 1 !important;
  mix-blend-mode: normal !important;
}

.qr-scanner-modal-content .alert {
  opacity: 1 !important;
  background-color: inherit !important;
  mix-blend-mode: normal !important;
}

/* Ensure modal backdrop doesn't affect content */
.modal.show .qr-scanner-modal-content {
  background-color: #ffffff !important;
  opacity: 1 !important;
  background: #ffffff !important;
}

/* Force center alignment for QR scanner modal */
.modal.show {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

.modal.show .qr-scanner-modal-dialog {
  margin: auto !important;
  position: relative !important;
}

    /* Two-column Questions layout */
    .q-grid{display:grid;gap:12px}
    @media(min-width:992px){ .q-grid{grid-template-columns:5fr 7fr} }

    /* Small helpers */
    .text-end{display:flex;justify-content:flex-end}
    .w-100{width:100%}
    .field{
      margin-top: 15px;
    }


